var optionDelete={title:"Thông báo",body:"Có chắc chắn muốn xóa không !",textCancel:"Hủy bỏ",textConfirm:"Xắc nhận",method:"POST",url:"",data:{},table:null,emptyEL:null,removeEL:null,reload:!1};function merge(e,t){return $.merge($.merge([],e),t)}function numberSeparator(e){var t=10;e+="";for(var o=0;o<t;o++)e=e.replace(",","");x=e.split("."),y=x[0],z=x.length>1?"."+x[1]:"";for(var n=/(\d+)(\d{3})/;n.test(y);)y=y.replace(n,"$1,$2");return t++,y+z}function _modalDelete(e){if(console.log(e),null!=e)if(null!=e.title&&(optionDelete.title=e.title),null!=e.body&&(optionDelete.body=e.body),null!=e.textCancel&&(optionDelete.textCancel=e.textCancel),null!=e.textConfirm&&(optionDelete.textConfirm=e.textConfirm),null!=e.method&&(optionDelete.method=e.method),null!=e.type&&(optionDelete.method=e.type),null!=e.url&&(optionDelete.url=e.url),null!=e.data&&(optionDelete.data=e.data),null!=e.table&&(optionDelete.table=e.table),null!=e.removeEL&&(optionDelete.removeEL=e.removeEL),null!=e.emptyEL&&(optionDelete.emptyEL=e.emptyEL),null!=e.reload&&(optionDelete.reload=e.reload),""==optionDelete.url){$("#errorAlert").remove();'<button type="button" class="close" data-dismiss="alert"><i class="ace-icon fa fa-times"></i></button>',"Chưa có data ! _modalDelete({..})","</div>",$("#delete-body").prepend('<div class="alert alert-danger" id="errorAlert"><button type="button" class="close" data-dismiss="alert"><i class="ace-icon fa fa-times"></i></button>Chưa có data ! _modalDelete({..})</div>'),$("#modalDelete").modal("show")}else $("#delete-title").html(optionDelete.title),$("#delete-body").html(optionDelete.body),$("#delete-button-cancel").html(optionDelete.textCancel),$("#delete-button-confirm").html(optionDelete.confirm),$("#modalDelete").modal("show");else alert("Chưa có data ! _modalDelete({..})")}function _modalError500(e){console.log(e),$("#errorAlert").remove(),""==e.responseJSON.message&&(e.responseJSON.message=e.statusText);var t='<div class="alert alert-danger" id="errorAlert">';t+='<button type="button" class="close" data-dismiss="alert"><i class="ace-icon fa fa-times"></i></button>',t+=e.responseJSON.message,t+="</div>",$(".modal-body").prepend(t)}function _buttonActionDropdown(e){var t='<div class="btn-group ">';return t+='<button data-toggle="dropdown" class="btn btn-info btn-white dropdown-toggle" aria-expanded="true">\t<i class="fa fa-cog"></i></button>',t+='<ul class="dropdown-menu dropdown-info dropdown-menu-right">',$.each(e,function(e,o){null==o.icon&&(o.icon=""),null==o.title&&(o.title=o.text),t+='<li><button class="btn btn-xs btn-block  '+o.class+'" '+o.attr+'  value="'+o.value+'" title="'+o.title+'">'+o.icon+"&nbsp;"+o.text+"</button></li>"}),t+="</ul>",t+="</div>"}function _buttonActionButton(e){var t='<div class="btn-group">';return $.each(e,function(e,o){null==o.icon&&(o.icon=""),null==o.text&&(o.text=""),null==o.title&&(o.title=o.text),t+='<button class="btn btn-xs  '+o.class+'" '+o.attr+'  value="'+o.value+'" title="'+o.title+'">'+o.icon+"&nbsp;"+o.text+"</button></li>"}),t+="</div>"}function _showError(e,t){if(null==t&&(t=""),$(".is-invalid").addClass("is-valid"),$(".is-invalid").removeClass("is-invalid"),$(".invalid-feedback").remove(),422==e.status){var o=e.responseJSON.errors;$.each(o,function(e,o){var n=$(t+" input[name="+e+"]"),a=$(t+" textarea[name="+e+"]"),r=$(t+" select[name="+e+"]");n?(n.addClass("is-invalid"),n.parent(".form-group")&&n.parent(".form-group").append('<span  class="error invalid-feedback"><i class="far fa-times-circle"></i> '+o[0]+"</span>"),n.parent(".input-group").parent(".form-group")&&n.parent(".input-group").parent(".form-group").append('<span  class="error invalid-feedback"><i class="far fa-times-circle"></i> '+o[0]+"</span>")):$(n).removeClass("is-invalid"),a?(a.addClass("is-invalid"),a.parent(".form-group")?a.parent(".form-group").append('<span  class="error invalid-feedback"><i class="far fa-times-circle"></i> '+o[0]+"</span>"):a.parent(".input-group").parent(".form-group")&&a.parent(".input-group").parent(".form-group").append('<span  class="error invalid-feedback"><i class="far fa-times-circle"></i> '+o[0]+"</span>")):$(a).removeClass("is-invalid"),r?(r.addClass("is-invalid"),r.parent(".form-group")?r.parent(".form-group").append('<span  class="error invalid-feedback"><i class="far fa-times-circle"></i> '+o[0]+"</span>"):r.parent(".input-group").parent(".form-group")&&r.parent(".input-group").parent(".form-group").append('<span  class="error invalid-feedback"><i class="far fa-times-circle"></i> '+o[0]+"</span>")):$(r).removeClass("is-invalid")})}}function reloadTable(e){null!=e&&$(e).DataTable().ajax.reload()}function buttonloading(e,t){1==t?(console.log(t),$(e).children("span").hasClass("loadding")||($(e).attr("disabled",t),$(e).prepend('<span  class="loadding spinner-border spinner-border-sm mr-1"></span>'),$(e).children("i").hide())):(console.log(t),$(e).children("span").hasClass("loadding")&&($(e).children("span").remove(),$(e).attr("disabled",t),$(e).children("i").show()))}function LangDataTable(){return{loadingRecords:"Đang tải ....",sProcessing:"<img style='width:50px; height:50px;' src='"+url_loading+"'/>",sLengthMenu:"Xem _MENU_ mục",sZeroRecords:"Không tìm thấy dòng nào phù hợp",sInfo:"Đang xem _START_ đến _END_ trong tổng số _TOTAL_ mục",sInfoEmpty:"Đang xem 0 đến 0 trong tổng số 0 mục",sInfoFiltered:"(được lọc từ _MAX_ mục)",sInfoPostFix:"",sSearch:"Tìm:",sUrl:"",oPaginate:{sFirst:"Đầu",sPrevious:"Trước",sNext:"Tiếp",sLast:"Cuối"}}}function echo(e){return null==e||""==e?"":e}var Lang="vi",dateRangePickerLocale="en"==Lang?{format:"DD-MM-YYYY",customRangeLabel:"Custom",applyLabel:"Select",cancelLabel:"Delete"}:{format:"DD-MM-YYYY",customRangeLabel:"Tùy Chọn",applyLabel:"Chọn",cancelLabel:"Xóa"};function daterange(e,t,o,n){var a=moment(moment().startOf(n)).format("YYYY-MM-DD"),r=moment(moment().endOf(n)).format("YYYY-MM-DD");$(t).val(a),$(o).val(r),$(e).daterangepicker({ranges:{"Tháng này":[moment().startOf("month"),moment().endOf("month")],"Tháng trước":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Hôm nay":[moment(),moment()],"Hôm qua":[moment().subtract(1,"days"),moment().subtract(1,"days")],"7 Ngày qua":[moment().subtract(6,"days"),moment()],"30 ngày trước":[moment().subtract(29,"days"),moment()],"Năm nay":[moment().startOf("year"),moment().endOf("year")],"Năm trước":[moment().subtract(1,"year").startOf("year"),moment().subtract(1,"year").endOf("year")]},locale:dateRangePickerLocale,startDate:moment(moment().startOf(n),"DD-MM-YYYY"),endDate:moment(moment().endOf(n),"DD-MM-YYYY"),language:Lang},function(n,a,r){$(".daterangepicker_label").val(r),0==n._isValid||0==a._isValid?($(e).attr("readonly",!0),$(t).val(""),$(o).val("")):($(t).val(n.format("YYYY-MM-DD")),$(o).val(a.format("YYYY-MM-DD")),$(e).attr("readonly",!1))})}function input_money_format(e){$(e).val($(e).val().replace(/\D/gm,""));var t=$(e).val().split(",").join("");e.value=t.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(",")}function money_format_to_number(e){return null==e||""==e?"":parseFloat(e.toString().replace(/,/g,""))}function money_format(e){return null==e||""==e?"":e.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(",")}var Toast=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3});function thongbao(e,t){Toast.fire({icon:e,title:t})}function null_to_number(e){return null==e||"null"==e?0:e}function init_tinymce(e,t){tinymce.init({selector:e,min_height:t,menubar:!1,plugins:["advlist autolink lists link charmap print preview anchor","searchreplace visualblocks  codesample fullscreen","insertdatetime media table paste imagetools image"],toolbar:"fullscreen  preview codesample | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | numlist bullist | forecolor backcolor removeformat | image media link | outdent indent",image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:function(e,t,o){var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept","image/*"),n.onchange=function(){var t=this.files[0],o=this.files[0].size,n=Math.round(o/1024);if(console.log("Kilobyte",Kilobyte),console.log("KilobyteImg",n),n>Kilobyte)return alert("Hình ảnh không được quá 3 MB"),!1;var a=new FileReader;a.onload=function(){var o="blobid"+(new Date).getTime(),n=tinymce.activeEditor.editorUpload.blobCache,r=a.result.split(",")[1],l=n.create(o,t,r);n.add(l),e(l.blobUri(),{title:t.name})},a.readAsDataURL(t)},n.click()},content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}),tinymce.DOM.loadCSS(editor_ui_css)}function changeDarkMode(e,t){$.ajax({url:e,type:"POST",dataType:"JSON",data:{type:t},success:function(e){if("web.posts.index"==isDarkMode)return location.reload();"on"==t?$("#bodyClass").addClass("dark-mode"):$("#bodyClass").removeClass("dark-mode")},error:function(e){}})}function readImage(e){console.log(e);var t=$.Deferred(),o=e.get(0).files;if(o&&o[0]){var n=new FileReader;n.onload=function(e){t.resolve(e.target.result)},n.readAsDataURL(o[0])}else t.resolve(void 0);return t.promise()}function setImgSRC(e,t){readImage($(e)).done(function(e){$(t).attr("src",e)})}function setImgAttr(e,t){readImage($(e)).done(function(e){$(t).attr("style","background-image: url("+e+")")})}function colorStatus(e){return"1"==e?"text-primary":"2"==e?"text-danger":"3"==e?"text-done":""}function alertJS(e,t){var o='<div class="alert alert-'+t+' text-small alert-dismissible" role="alert">';return o+=""+e,o+='<button type="button" class="close" style="color:#fff" data-dismiss="alert" aria-label="Close">',o+='<span style="color:#fff" aria-hidden="true">&times;</span>',o+="</button>",o+="</div>"}function removeEL(){null!=optionDelete.removeEL&&$(optionDelete.removeEL).remove()}function emptyEL(){null!=optionDelete.emptyEL&&$(optionDelete.emptyEL).empty()}function reloadPage(){1==optionDelete.reload&&location.reload()}function toSlug(e){return("@"+e.toLowerCase().replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a").replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e").replace(/i|í|ì|ỉ|ĩ|ị/gi,"i").replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o").replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u").replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y").replace(/đ/gi,"d").replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi,"").replace(/ /gi,"-").replace(/\-\-\-\-\-/gi,"-").replace(/\-\-\-\-/gi,"-").replace(/\-\-\-/gi,"-").replace(/\-\-/gi,"-")+"@").replace(/\@\-|\-\@|\@/gi,"")}function createYoutubeEmbed(e){return'<iframe  src="https://www.youtube.com/embed/'+e+'" frameborder="0" uk-video="automute: true" allowfullscreen uk-responsive></iframe>'}function transformYoutubeLinks(e){if(!e)return e;const t=this,o=/(?:)<a([^>]+)>(.+?)<\/a>/g,n=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([^& \n<]+)(?:[^ \n<]+)?/g;let a=e;const r=e.match(/(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)([^& \n<]+)(?:[^ \n<]+)?/g);if(r&&r.length>0){const i=e.match(o);if(i&&i.length>0)for(var l=0;l<i.length;l++)a=a.replace(i[l],"#placeholder"+l+"#");for(l=0;l<r.length;l++){let e=r[l].split(n);a=a.replace(r[l],t.createYoutubeEmbed(e[1]))}if(i&&i.length>0)for(l=0;l<i.length;l++)a=a.replace("#placeholder"+l+"#",i[l])}return a}contextLoader={},contextLoader.htmlContent='<div style="margin:3px;" class="timeline-item"><div class="animated-background"><div class="background-masker header-top"></div><div class="background-masker header-left"></div><div class="background-masker header-right"></div><div class="background-masker header-bottom"></div><div class="background-masker subheader-left"></div><div class="background-masker subheader-right"></div><div class="background-masker subheader-bottom"></div><div class="background-masker content-top"></div><div class="background-masker content-first-end"></div><div class="background-masker content-second-line"></div><div class="background-masker content-second-end"></div><div class="background-masker content-third-line"></div><div class="background-masker content-third-end"></div></div></div>',contextLoader.addLoader=function(e,t){var o="";for(null!=t&&-1!=t||(t=1),null!=t&&-1!=t||(t=100),i=1;i<=t;i++)o+=contextLoader.htmlContent;document.querySelector(e).innerHTML=o},$("div").hasClass("listLoading")&&contextLoader.addLoader(".listLoading",parseInt($(".listLoading").attr("data-count"))),$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(".count").each(function(){$(this).prop("Counter",0).animate({Counter:$(this).text()},{duration:1e3,easing:"swing",step:function(e){$(this).text(Math.ceil(e))}})});var e,t=window.location.href;console.log(t),(e=$('.nav-sidebar > .nav-item  > a[href="'+t+'"]')).addClass("active"),console.log(e),(e=$('.nav-treeview > .nav-item > a[href="'+t+'"]')).addClass("active"),e.parents(".has-treeview").children().addClass("active"),e.parents(".has-treeview").addClass("active menu-open"),e.parent().parent().attr("style","display: block;").parent().addClass("active"),e.addClass("active "),$("#delete-button-confirm").on("click",function(){buttonloading("#delete-button-confirm",!0),$.ajax({url:optionDelete.url,type:optionDelete.method,dataType:"JSON",data:optionDelete.data,success:function(e){buttonloading("#delete-button-confirm",!1),"success"==e.status?(reloadTable(optionDelete.table),$("#modalDelete").modal("hide"),Toast.fire({icon:e.status,title:e.msg}),emptyEL(),removeEL(),reloadPage()):"error"==e.status&&Toast.fire({icon:e.status,title:e.msg})},error:function(e){console.log(e),buttonloading("#delete-button-confirm",!1),_modalError500(e)}})}),$(".button-logout").on("click",function(e){e.preventDefault(),$.ajax({url:$(this).attr("href"),type:"GET",dataType:"JSON",success:function(e){location.reload()},error:function(e){alert("Not logout !")}})}),$("#changeDarkMode").on("click",function(){var e=$(this).attr("data-darkmode"),t=$(this).attr("data-url");$(this).attr("data-darkmode","on"==e?"off":"on"),changeDarkMode(t,e)}),$(document).delegate(".btn-addFollows","click",function(){var e={button:this,url:$(this).data("url"),id:$(this).val(),event:$(this).data("event")};buttonloading(e.button,!0),$.ajax({url:e.url,type:"POST",dataType:"JSON",data:{id:e.id},success:function(t){"success"==t.status?($(".removeFollows"+e.id).show(),$(".addFollows"+e.id).hide(),$("#follow-"+e.id).text(t.data.CountFollows),$("#following-"+t.data.auth.id).text(t.data.auth.CountFollowing),buttonloading(e.button,!1)):buttonloading(e.button,!1)},error:function(t){buttonloading(e.button,!1)}})}),$(document).delegate(".btn-removeFollows","click",function(){var e={button:this,url:$(this).data("url"),id:$(this).val(),event:$(this).data("event")};buttonloading(e.button,!0),$.ajax({url:e.url,type:"POST",dataType:"JSON",data:{id:e.id},success:function(t){"success"==t.status?($(".removeFollows"+e.id).hide(),$(".addFollows"+e.id).show(),$("#follow-"+e.id).text(t.data.CountFollows),$("#following-"+t.data.auth.id).text(t.data.auth.CountFollowing),buttonloading(e.button,!1),"remove"==e.event&&setTimeout(function(){location.reload(),$("#itemAuthID"+e.id).remove()},500)):buttonloading(e.button,!1)},error:function(t){buttonloading(e.button,!1)}})}),setTimeout(function(){$(".is767").removeClass("d-none")},1e3),"function"==typeof Lazy&&$("img").Lazy({successLoader:function(e,t){t(!0)},errorLoader:function(e,t){t(!1)}}),mybutton=document.getElementById("back-to-top"),window.onscroll=function(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"},$("#back-to-top").on("click",function(){document.body.scrollTop=0,document.documentElement.scrollTop=0});var o=!1;function n(){$(".listLoading,.search_loading,.skeleton,.single_loading").remove(),$(".listLoadingDone,.post-content,.search_loadingDone,.single_loadingDone").slideDown("show")}$("ul").hasClass("render-post-home")&&(o=!0,$("#button-load-more").hide()),$("div").hasClass("controlSidebar")?(contextLoader.addLoader(".search_loading",1),contextLoader.addLoader("#randomPosts,#postTopView,#tags,#authors,#sameCategory",3),o&&contextLoader.addLoader("#render-post-home",10),$.ajax({url:url_widget,type:"GET",data:{_postID:$.trim(_postID),_cate_slug:$.trim(_cate_slug),_loadhome:o},dataType:"JSON",success:function(e){$("#sameCategory").html(e.sameCategory),$("#randomPosts").html(e.randomPosts),$("#postTopView").html(e.postTopView),$("#tags").html(e.tags),$("#authors").html(e.authors),$("#render-post-home").html(e.posthome),$("#button-load-more").show(),n(),$(".product-description").tooltip()},error:function(e){console.log(e)}})):n();var a=["#20c997","#20c997","#e83e8c","#dc3545"];$(".text-sm .main-header .nav-link").mouseenter(function(){var e=a[Math.floor(Math.random()*a.length)];$(this).css("background-color",e)}),$(".text-sm .main-header .nav-link").mouseleave(function(){$(this).css("background-color","")})});var colors=new Array([62,35,255],[60,255,60],[255,35,98],[45,175,230],[255,0,255],[255,128,0]),step=0,colorIndices=[0,1,2,3],gradientSpeed=.002;function updateGradient(){if(void 0!==$){var e=colors[colorIndices[0]],t=colors[colorIndices[1]],o=colors[colorIndices[2]],n=colors[colorIndices[3]],a=1-step,r="rgb("+Math.round(a*e[0]+step*t[0])+","+Math.round(a*e[1]+step*t[1])+","+Math.round(a*e[2]+step*t[2])+")",l="rgb("+Math.round(a*o[0]+step*n[0])+","+Math.round(a*o[1]+step*n[1])+","+Math.round(a*o[2]+step*n[2])+")";$(".bg-color").css({background:"-webkit-gradient(linear, left top, right top, from("+r+"), to("+l+"))"}).css({background:"-moz-linear-gradient(left, "+r+" 0%, "+l+" 100%)"}),$(".color").css({color:r}),$(".border-color").css({color:"4px solid "+r+";"}),(step+=gradientSpeed)>=1&&(step%=1,colorIndices[0]=colorIndices[1],colorIndices[2]=colorIndices[3],colorIndices[1]=(colorIndices[1]+Math.floor(1+Math.random()*(colors.length-1)))%colors.length,colorIndices[3]=(colorIndices[3]+Math.floor(1+Math.random()*(colors.length-1)))%colors.length)}}function randomUuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))}function uuid(){return`${randomUuidv4()}-${Math.round((new Date).getTime()/1e3)}`}function contentDarkMode(){$("body").hasClass("dark-mode")&&($(".post-content").find("a").css("color","rgb(96 224 218)"),$(".post-content").find("p").css("color","whitesmoke"),$(".post-content").find("p,h1,h2,h3,h4,h5,h6,ul,li").css("color","whitesmoke"),$(".post-content").find("p span").css("color","whitesmoke"),$(".post-content").find("p font").css("color","whitesmoke"),$(".post-content").find("p,h1 span,h2 span,h3 span,h4 span,h5 span,h6 span,ul,li").css("color","whitesmoke"),$(".post-content").find("table").removeAttr("style"),$(".post-content").find("table").addClass("table hover table-bordered table-hover table-sm table-striped w-100"),$(".post-content").find("table tr").removeAttr("style"),$(".post-content").find("table tr th").removeAttr("style"),$(".post-content").find("table tr td").removeAttr("style"),$(".post-content").find("table tr").css("color","whitesmoke"),$(".post-content").find("table tr th").css("color","whitesmoke"),$(".post-content").find("table tr td").css("color","whitesmoke"),$(".post-content").find("table th span").css("color","whitesmoke"),$(".post-content").find("table td span").css("color","whitesmoke"),$(".post-content").find("table td p").css("color","whitesmoke"),$(".post-content").find("table td p font").css("color","whitesmoke"),$(".post-content").find("pre").css("background-color","#121416;"))}setInterval(updateGradient,5);
