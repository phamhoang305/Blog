var optionDelete={title:"Thông báo",body:"Có chắc chắn muốn xóa không !",textCancel:"Hủy bỏ",textConfirm:"Xắc nhận",method:"POST",url:"",data:{},table:null,emptyEL:null,removeEL:null,reload:!1};function merge(t,e){return $.merge($.merge([],t),e)}function numberSeparator(t){var e=10;t+="";for(var o=0;o<e;o++)t=t.replace(",","");x=t.split("."),y=x[0],z=x.length>1?"."+x[1]:"";for(var n=/(\d+)(\d{3})/;n.test(y);)y=y.replace(n,"$1,$2");return e++,y+z}function _modalDelete(t){if(console.log(t),null!=t)if(null!=t.title&&(optionDelete.title=t.title),null!=t.body&&(optionDelete.body=t.body),null!=t.textCancel&&(optionDelete.textCancel=t.textCancel),null!=t.textConfirm&&(optionDelete.textConfirm=t.textConfirm),null!=t.method&&(optionDelete.method=t.method),null!=t.type&&(optionDelete.method=t.type),null!=t.url&&(optionDelete.url=t.url),null!=t.data&&(optionDelete.data=t.data),null!=t.table&&(optionDelete.table=t.table),null!=t.removeEL&&(optionDelete.removeEL=t.removeEL),null!=t.emptyEL&&(optionDelete.emptyEL=t.emptyEL),null!=t.reload&&(optionDelete.reload=t.reload),""==optionDelete.url){$("#errorAlert").remove();'<button type="button" class="close" data-dismiss="alert"><i class="ace-icon fa fa-times"></i></button>',"Chưa có data ! _modalDelete({..})","</div>",$("#delete-body").prepend('<div class="alert alert-danger" id="errorAlert"><button type="button" class="close" data-dismiss="alert"><i class="ace-icon fa fa-times"></i></button>Chưa có data ! _modalDelete({..})</div>'),$("#modalDelete").modal("show")}else $("#delete-title").html(optionDelete.title),$("#delete-body").html(optionDelete.body),$("#delete-button-cancel").html(optionDelete.textCancel),$("#delete-button-confirm").html(optionDelete.confirm),$("#modalDelete").modal("show");else alert("Chưa có data ! _modalDelete({..})")}function _modalError500(t){console.log(t),$("#errorAlert").remove(),""==t.responseJSON.message&&(t.responseJSON.message=t.statusText);var e='<div class="alert alert-danger" id="errorAlert">';e+='<button type="button" class="close" data-dismiss="alert"><i class="ace-icon fa fa-times"></i></button>',e+=t.responseJSON.message,e+="</div>",$(".modal-body").prepend(e)}function _buttonActionDropdown(t){var e='<div class="btn-group ">';return e+='<button data-toggle="dropdown" class="btn btn-info btn-white dropdown-toggle" aria-expanded="true">\t<i class="fa fa-cog"></i></button>',e+='<ul class="dropdown-menu dropdown-info dropdown-menu-right">',$.each(t,function(t,o){null==o.icon&&(o.icon=""),null==o.title&&(o.title=o.text),e+='<li><button class="btn btn-xs btn-block  '+o.class+'" '+o.attr+'  value="'+o.value+'" title="'+o.title+'">'+o.icon+"&nbsp;"+o.text+"</button></li>"}),e+="</ul>",e+="</div>"}function _buttonActionButton(t){var e='<div class="btn-group">';return $.each(t,function(t,o){null==o.icon&&(o.icon=""),null==o.text&&(o.text=""),null==o.title&&(o.title=o.text),e+='<button class="btn btn-xs  '+o.class+'" '+o.attr+'  value="'+o.value+'" title="'+o.title+'">'+o.icon+"&nbsp;"+o.text+"</button></li>"}),e+="</div>"}function _showError(t,e){if(null==e&&(e=""),$(".is-invalid").addClass("is-valid"),$(".is-invalid").removeClass("is-invalid"),$(".invalid-feedback").remove(),422==t.status){var o=t.responseJSON.errors;$.each(o,function(t,o){var n=$(e+" input[name="+t+"]"),a=$(e+" textarea[name="+t+"]"),r=$(e+" select[name="+t+"]");n?(n.addClass("is-invalid"),n.parent(".form-group")&&n.parent(".form-group").append('<span  class="error invalid-feedback"><i class="far fa-times-circle"></i> '+o[0]+"</span>"),n.parent(".input-group").parent(".form-group")&&n.parent(".input-group").parent(".form-group").append('<span  class="error invalid-feedback"><i class="far fa-times-circle"></i> '+o[0]+"</span>")):$(n).removeClass("is-invalid"),a?(a.addClass("is-invalid"),a.parent(".form-group")?a.parent(".form-group").append('<span  class="error invalid-feedback"><i class="far fa-times-circle"></i> '+o[0]+"</span>"):a.parent(".input-group").parent(".form-group")&&a.parent(".input-group").parent(".form-group").append('<span  class="error invalid-feedback"><i class="far fa-times-circle"></i> '+o[0]+"</span>")):$(a).removeClass("is-invalid"),r?(r.addClass("is-invalid"),r.parent(".form-group")?r.parent(".form-group").append('<span  class="error invalid-feedback"><i class="far fa-times-circle"></i> '+o[0]+"</span>"):r.parent(".input-group").parent(".form-group")&&r.parent(".input-group").parent(".form-group").append('<span  class="error invalid-feedback"><i class="far fa-times-circle"></i> '+o[0]+"</span>")):$(r).removeClass("is-invalid")})}}function reloadTable(t){null!=t&&$(t).DataTable().ajax.reload()}function buttonloading(t,e){1==e?(console.log(e),$(t).children("span").hasClass("loadding")||($(t).attr("disabled",e),$(t).prepend('<span  class="loadding spinner-border spinner-border-sm mr-1"></span>'),$(t).children("i").hide())):(console.log(e),$(t).children("span").hasClass("loadding")&&($(t).children("span").remove(),$(t).attr("disabled",e),$(t).children("i").show()))}function LangDataTable(){return{loadingRecords:"Đang tải ....",sProcessing:"<img style='width:50px; height:50px;' src='"+url_loading+"'/>",sLengthMenu:"Xem _MENU_ mục",sZeroRecords:"Không tìm thấy dòng nào phù hợp",sInfo:"Đang xem _START_ đến _END_ trong tổng số _TOTAL_ mục",sInfoEmpty:"Đang xem 0 đến 0 trong tổng số 0 mục",sInfoFiltered:"(được lọc từ _MAX_ mục)",sInfoPostFix:"",sSearch:"Tìm:",sUrl:"",oPaginate:{sFirst:"Đầu",sPrevious:"Trước",sNext:"Tiếp",sLast:"Cuối"}}}function echo(t){return null==t||""==t?"":t}var Lang="vi",dateRangePickerLocale="en"==Lang?{format:"DD-MM-YYYY",customRangeLabel:"Custom",applyLabel:"Select",cancelLabel:"Delete"}:{format:"DD-MM-YYYY",customRangeLabel:"Tùy Chọn",applyLabel:"Chọn",cancelLabel:"Xóa"};function daterange(t,e,o,n){var a=moment(moment().startOf(n)).format("YYYY-MM-DD"),r=moment(moment().endOf(n)).format("YYYY-MM-DD");$(e).val(a),$(o).val(r),$(t).daterangepicker({ranges:{"Tháng này":[moment().startOf("month"),moment().endOf("month")],"Tháng trước":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")],"Hôm nay":[moment(),moment()],"Hôm qua":[moment().subtract(1,"days"),moment().subtract(1,"days")],"7 Ngày qua":[moment().subtract(6,"days"),moment()],"30 ngày trước":[moment().subtract(29,"days"),moment()],"Năm nay":[moment().startOf("year"),moment().endOf("year")],"Năm trước":[moment().subtract(1,"year").startOf("year"),moment().subtract(1,"year").endOf("year")]},locale:dateRangePickerLocale,startDate:moment(moment().startOf(n),"DD-MM-YYYY"),endDate:moment(moment().endOf(n),"DD-MM-YYYY"),language:Lang},function(n,a,r){$(".daterangepicker_label").val(r),0==n._isValid||0==a._isValid?($(t).attr("readonly",!0),$(e).val(""),$(o).val("")):($(e).val(n.format("YYYY-MM-DD")),$(o).val(a.format("YYYY-MM-DD")),$(t).attr("readonly",!1))})}function input_money_format(t){$(t).val($(t).val().replace(/\D/gm,""));var e=$(t).val().split(",").join("");t.value=e.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(",")}function money_format_to_number(t){return null==t||""==t?"":parseFloat(t.toString().replace(/,/g,""))}function money_format(t){return null==t||""==t?"":t.toString().split(/(?=(?:\d{3})+(?:\.|$))/g).join(",")}var Toast=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3});function thongbao(t,e){Toast.fire({icon:t,title:e})}function null_to_number(t){return null==t||"null"==t?0:t}function init_tinymce(t,e){tinymce.init({selector:t,min_height:e,menubar:!1,plugins:["advlist autolink lists link charmap print preview anchor","searchreplace visualblocks  codesample fullscreen","insertdatetime media table paste imagetools image"],toolbar:"fullscreen  preview codesample | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | numlist bullist | forecolor backcolor removeformat | image media link | outdent indent",image_title:!0,automatic_uploads:!0,file_picker_types:"image",file_picker_callback:function(t,e,o){var n=document.createElement("input");n.setAttribute("type","file"),n.setAttribute("accept","image/*"),n.onchange=function(){var e=this.files[0],o=this.files[0].size,n=Math.round(o/1024);if(console.log("Kilobyte",Kilobyte),console.log("KilobyteImg",n),n>Kilobyte)return alert("Hình ảnh không được quá 3 MB"),!1;var a=new FileReader;a.onload=function(){var o="blobid"+(new Date).getTime(),n=tinymce.activeEditor.editorUpload.blobCache,r=a.result.split(",")[1],l=n.create(o,e,r);n.add(l),t(l.blobUri(),{title:e.name})},a.readAsDataURL(e)},n.click()},content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:14px }"}),tinymce.DOM.loadCSS(editor_ui_css)}function changeDarkMode(t,e){$.ajax({url:t,type:"POST",dataType:"JSON",data:{type:e},success:function(t){if("web.posts.index"==isDarkMode)return location.reload();"on"==e?$("#bodyClass").addClass("dark-mode"):$("#bodyClass").removeClass("dark-mode")},error:function(t){}})}function readImage(t){console.log(t);var e=$.Deferred(),o=t.get(0).files;if(o&&o[0]){var n=new FileReader;n.onload=function(t){e.resolve(t.target.result)},n.readAsDataURL(o[0])}else e.resolve(void 0);return e.promise()}function setImgSRC(t,e){readImage($(t)).done(function(t){$(e).attr("src",t)})}function setImgAttr(t,e){readImage($(t)).done(function(t){$(e).attr("style","background-image: url("+t+")")})}function colorStatus(t){return"1"==t?"text-primary":"2"==t?"text-danger":"3"==t?"text-done":""}function alertJS(t,e){var o='<div class="alert alert-'+e+' text-small alert-dismissible" role="alert">';return o+=""+t,o+='<button type="button" class="close" style="color:#fff" data-dismiss="alert" aria-label="Close">',o+='<span style="color:#fff" aria-hidden="true">&times;</span>',o+="</button>",o+="</div>"}function removeEL(){null!=optionDelete.removeEL&&$(optionDelete.removeEL).remove()}function emptyEL(){null!=optionDelete.emptyEL&&$(optionDelete.emptyEL).empty()}function reloadPage(){1==optionDelete.reload&&location.reload()}function toSlug(t){return("@"+t.toLowerCase().replace(/á|à|ả|ạ|ã|ă|ắ|ằ|ẳ|ẵ|ặ|â|ấ|ầ|ẩ|ẫ|ậ/gi,"a").replace(/é|è|ẻ|ẽ|ẹ|ê|ế|ề|ể|ễ|ệ/gi,"e").replace(/i|í|ì|ỉ|ĩ|ị/gi,"i").replace(/ó|ò|ỏ|õ|ọ|ô|ố|ồ|ổ|ỗ|ộ|ơ|ớ|ờ|ở|ỡ|ợ/gi,"o").replace(/ú|ù|ủ|ũ|ụ|ư|ứ|ừ|ử|ữ|ự/gi,"u").replace(/ý|ỳ|ỷ|ỹ|ỵ/gi,"y").replace(/đ/gi,"d").replace(/\`|\~|\!|\@|\#|\||\$|\%|\^|\&|\*|\(|\)|\+|\=|\,|\.|\/|\?|\>|\<|\'|\"|\:|\;|_/gi,"").replace(/ /gi,"-").replace(/\-\-\-\-\-/gi,"-").replace(/\-\-\-\-/gi,"-").replace(/\-\-\-/gi,"-").replace(/\-\-/gi,"-")+"@").replace(/\@\-|\-\@|\@/gi,"")}function createYoutubeEmbed(t){return'<iframe  src="https://www.youtube.com/embed/'+t+'" frameborder="0" uk-video="automute: true" allowfullscreen uk-responsive></iframe>'}function transformYoutubeLinks(t){if(!t)return t;const e=this,o=/(?:)<a([^>]+)>(.+?)<\/a>/g,n=/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([^& \n<]+)(?:[^ \n<]+)?/g;let a=t;const r=t.match(/(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)([^& \n<]+)(?:[^ \n<]+)?/g);if(r&&r.length>0){const i=t.match(o);if(i&&i.length>0)for(var l=0;l<i.length;l++)a=a.replace(i[l],"#placeholder"+l+"#");for(l=0;l<r.length;l++){let t=r[l].split(n);a=a.replace(r[l],e.createYoutubeEmbed(t[1]))}if(i&&i.length>0)for(l=0;l<i.length;l++)a=a.replace("#placeholder"+l+"#",i[l])}return a}contextLoader={},contextLoader.htmlContent='<div style="margin:3px;" class="timeline-item"><div class="animated-background"><div class="background-masker header-top"></div><div class="background-masker header-left"></div><div class="background-masker header-right"></div><div class="background-masker header-bottom"></div><div class="background-masker subheader-left"></div><div class="background-masker subheader-right"></div><div class="background-masker subheader-bottom"></div><div class="background-masker content-top"></div><div class="background-masker content-first-end"></div><div class="background-masker content-second-line"></div><div class="background-masker content-second-end"></div><div class="background-masker content-third-line"></div><div class="background-masker content-third-end"></div></div></div>',contextLoader.addLoader=function(t,e){var o="";for(null!=e&&-1!=e||(e=1),null!=e&&-1!=e||(e=100),i=1;i<=e;i++)o+=contextLoader.htmlContent;document.querySelector(t).innerHTML=o},$("div").hasClass("listLoading")&&contextLoader.addLoader(".listLoading",parseInt($(".listLoading").attr("data-count"))),$(document).ready(function(){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).delegate(".btn-show-login","click",function(){$("#modalLogin").modal("show")}),$(".mytooltip").tooltip(),$("#formLogin").on("submit",function(t){var e=new FormData(this);t.preventDefault(),$("#alertJS").empty(),buttonloading("#buttonLogin",!0),$.ajax({url:$("#buttonLogin").attr("data-url"),type:"POST",data:e,dataType:"JSON",processData:!1,contentType:!1,success:function(t){if("success"===t.status)return buttonloading("#buttonLogin",!1),location.reload();"error"===t.status?(buttonloading("#buttonLogin",!1),$("#alertJS").html(alertJS(t.msg,"danger"))):(buttonloading("#buttonLogin",!1),$("#alertJS").html(alertJS("Máy chủ không thể thực hiện đăng nhập!","danger")))},error:function(t){buttonloading("#buttonLogin",!1),$("#alertJS").html(alertJS("Máy chủ không thể thực hiện đăng nhập!","danger"))}})}),$(".count").each(function(){$(this).prop("Counter",0).animate({Counter:$(this).text()},{duration:1e3,easing:"swing",step:function(t){$(this).text(Math.ceil(t))}})});var t,e=window.location.href;console.log(e),(t=$('.nav-sidebar > .nav-item  > a[href="'+e+'"]')).addClass("active"),console.log(t),(t=$('.nav-treeview > .nav-item > a[href="'+e+'"]')).addClass("active"),t.parents(".has-treeview").children().addClass("active"),t.parents(".has-treeview").addClass("active menu-open"),t.parent().parent().attr("style","display: block;").parent().addClass("active"),t.addClass("active "),$("#delete-button-confirm").on("click",function(){buttonloading("#delete-button-confirm",!0),$.ajax({url:optionDelete.url,type:optionDelete.method,dataType:"JSON",data:optionDelete.data,success:function(t){buttonloading("#delete-button-confirm",!1),"success"==t.status?(reloadTable(optionDelete.table),$("#modalDelete").modal("hide"),Toast.fire({icon:t.status,title:t.msg}),emptyEL(),removeEL(),reloadPage()):"error"==t.status&&Toast.fire({icon:t.status,title:t.msg})},error:function(t){console.log(t),buttonloading("#delete-button-confirm",!1),_modalError500(t)}})}),$(".button-logout").on("click",function(t){t.preventDefault(),$.ajax({url:$(this).attr("href"),type:"GET",dataType:"JSON",success:function(t){location.reload()},error:function(t){alert("Not logout !")}})}),$("#changeDarkMode").on("click",function(){var t=$(this).attr("data-darkmode"),e=$(this).attr("data-url");$(this).attr("data-darkmode","on"==t?"off":"on"),changeDarkMode(e,t)}),$(document).delegate(".btn-addFollows","click",function(){var t={button:this,url:$(this).data("url"),id:$(this).val(),event:$(this).data("event")};buttonloading(t.button,!0),$.ajax({url:t.url,type:"POST",dataType:"JSON",data:{id:t.id},success:function(e){"success"==e.status?($(".removeFollows"+t.id).show(),$(".addFollows"+t.id).hide(),$("#follow-"+t.id).text(e.data.CountFollows),$("#following-"+e.data.auth.id).text(e.data.auth.CountFollowing),buttonloading(t.button,!1)):buttonloading(t.button,!1)},error:function(e){buttonloading(t.button,!1)}})}),$(document).delegate(".btn-removeFollows","click",function(){var t={button:this,url:$(this).data("url"),id:$(this).val(),event:$(this).data("event")};buttonloading(t.button,!0),$.ajax({url:t.url,type:"POST",dataType:"JSON",data:{id:t.id},success:function(e){"success"==e.status?($(".removeFollows"+t.id).hide(),$(".addFollows"+t.id).show(),$("#follow-"+t.id).text(e.data.CountFollows),$("#following-"+e.data.auth.id).text(e.data.auth.CountFollowing),buttonloading(t.button,!1),"remove"==t.event&&setTimeout(function(){location.reload(),$("#itemAuthID"+t.id).remove()},500)):buttonloading(t.button,!1)},error:function(e){buttonloading(t.button,!1)}})}),setTimeout(function(){$(".is767").removeClass("d-none")},1e3),"function"==typeof Lazy&&$("img").Lazy({successLoader:function(t,e){e(!0)},errorLoader:function(t,e){e(!1)}}),mybutton=document.getElementById("back-to-top"),window.onscroll=function(){document.body.scrollTop>20||document.documentElement.scrollTop>20?mybutton.style.display="block":mybutton.style.display="none"},$("#back-to-top").on("click",function(){document.body.scrollTop=0,document.documentElement.scrollTop=0});var o=!1;function n(){$(".listLoading,.search_loading,.skeleton,.single_loading").remove(),$(".listLoadingDone,.post-content,.search_loadingDone,.single_loadingDone").slideDown("show")}$("ul").hasClass("render-post-home")&&(o=!0,$("#button-load-more").hide()),$("div").hasClass("controlSidebar")?(contextLoader.addLoader(".search_loading",1),contextLoader.addLoader("#randomPosts,#postTopView,#tags,#authors,#sameCategory",3),o&&contextLoader.addLoader("#render-post-home",10),$.ajax({url:url_widget,type:"GET",data:{_postID:$.trim(_postID),_cate_slug:$.trim(_cate_slug),_loadhome:o},dataType:"JSON",success:function(t){$("#sameCategory").html(t.sameCategory),$("#randomPosts").html(t.randomPosts),$("#postTopView").html(t.postTopView),$("#tags").html(t.tags),$("#authors").html(t.authors),$("#render-post-home").html(t.posthome),$("#button-load-more").show(),n(),$(".product-description").tooltip()},error:function(t){console.log(t)}})):n();var a=["#20c997","#20c997","#e83e8c","#dc3545"];$(".text-sm .main-header .nav-link,.bg-rand").mouseenter(function(){var t=a[Math.floor(Math.random()*a.length)];$(this).css("background-color",t)}),$(".text-sm .main-header .nav-link,.bg-rand").mouseleave(function(){$(this).css("background-color","")})});var colors=new Array([62,35,255],[60,255,60],[255,35,98],[45,175,230],[255,0,255],[255,128,0]),step=0,colorIndices=[0,1,2,3],gradientSpeed=.002;function updateGradient(){if(void 0!==$){var t=colors[colorIndices[0]],e=colors[colorIndices[1]],o=colors[colorIndices[2]],n=colors[colorIndices[3]],a=1-step,r="rgb("+Math.round(a*t[0]+step*e[0])+","+Math.round(a*t[1]+step*e[1])+","+Math.round(a*t[2]+step*e[2])+")",l="rgb("+Math.round(a*o[0]+step*n[0])+","+Math.round(a*o[1]+step*n[1])+","+Math.round(a*o[2]+step*n[2])+")";$(".bg-color").css({background:"-webkit-gradient(linear, left top, right top, from("+r+"), to("+l+"))"}).css({background:"-moz-linear-gradient(left, "+r+" 0%, "+l+" 100%)"}),$(".color").css({color:r}),$(".border-color").css({color:"4px solid "+r+";"}),(step+=gradientSpeed)>=1&&(step%=1,colorIndices[0]=colorIndices[1],colorIndices[2]=colorIndices[3],colorIndices[1]=(colorIndices[1]+Math.floor(1+Math.random()*(colors.length-1)))%colors.length,colorIndices[3]=(colorIndices[3]+Math.floor(1+Math.random()*(colors.length-1)))%colors.length)}}function randomUuidv4(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16))}function uuid(){return`${randomUuidv4()}-${Math.round((new Date).getTime()/1e3)}`}function contentDarkMode(){if($("body").hasClass("dark-mode")){var t="#dbe4ec";$(".post-content").find("a").css("color","rgb(96 224 218)"),$(".post-content").find("p,h1,h2,h3,h4,h5,h6,ul,li").css("color",t),$(".post-content").find("p span").css("color",t),$(".post-content").find("p font").css("color",t),$(".post-content").find("h1 span,h2 span,h3 span,h4 span,h5 span,h6 span,li span").css("color",t),$(".post-content").find("h1 strong,h2 strong,h3 strong,h4 strong,h5 strong,h6 strong,li strong").css("color",t),$(".post-content").find("h1 b,h2 b,h3 b,h4 b,h5 b,h6 b,li b").css("color",t),$(".post-content").find("h1 font,h2 font,h3 font,h4 font,h5 font,h6 font,li font").css("color",t),$(".post-content").find("h1 i,h2 i,h3 i,h4 i,h5 i,h6 i,li i").css("color",t),$(".post-content").find("table").removeAttr("style"),$(".post-content").find("table").addClass("table hover table-bordered table-hover table-sm table-striped w-100"),$(".post-content").find("table tr").removeAttr("style"),$(".post-content").find("table tr th").removeAttr("style"),$(".post-content").find("table tr td").removeAttr("style"),$(".post-content").find("table tr").css("color",t),$(".post-content").find("table tr th").css("color",t),$(".post-content").find("table tr td").css("color",t),$(".post-content").find("table th span").css("color",t),$(".post-content").find("table td span").css("color",t),$(".post-content").find("table td p").css("color",t),$(".post-content").find("table td p font").css("color",t),$(".post-content").find("pre").css("background-color","#121416;")}}setInterval(updateGradient,5);
